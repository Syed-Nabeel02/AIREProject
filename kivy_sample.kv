ScreenManager:
    Menu_Screen:
    Early_Engagement_Screen:
    Pre_AGP0_Screen:
    AGP0_Screen:
    Loading_Screen:

<Menu_Screen>:
    name: 'menu'
    MDGridLayout:
        cols: 2
        rows: 1

        FitImage:
            source: '1.png'
        MDBoxLayout:
            orientation: 'vertical'
            spacing: 10
            padding: 10

            MDRectangleFlatButton:
                text: 'Early Engagment'
                size_hint: (1,1)
                on_press: root.manager.current = 'early_engagement'
            MDRectangleFlatButton:
                text: 'Pre AGP0'
                size_hint: (1,1)
                on_press: root.manager.current = 'pre_agp0'
            MDRectangleFlatButton:
                text: 'AGP0'
                size_hint: (1,1)
                on_press: root.manager.current = 'agp0'
            MDBoxLayout:
                spacing: 10
                MDRectangleFlatButton:
                    text: '+'
                    size_hint: (1,1)
                MDRectangleFlatButton:
                    text: '+'
                    size_hint: (1,1)
                MDRectangleFlatButton:
                    text: 'Info'
                    size_hint: (1,1)

    
<Early_Engagement_Screen>:
    name: 'early_engagement'
    MDBoxLayout:
        orientation: 'vertical'
        spacing: 10
        padding: 10
        MDBoxLayout:
            MDLabel:
                id: directory
                text: 'Input an operation plan file.'
                halign: 'center'
                size_hint: (1,1)
            MDRectangleFlatButton:
                text: 'Choose a file'
                size_hint: (1,1)
                on_press: app.select_file()
        MDBoxLayout:
            spacing: 10
            MDLabel:
                id: sheet_name
                text: 'Sheet Name?'
                halign: 'center'
                size_hint: (1,1)
            MDRectangleFlatButton:
                text: 'Run'
                size_hint: (1,1)
                on_press: app.select_run()
            MDRectangleFlatButton:
                text: 'Grow'
                size_hint: (1,1)
                on_press: app.select_grow()
            MDRectangleFlatButton:
                text: 'Transform'
                size_hint: (1,1)
                on_press: app.select_transform()
        MDBoxLayout:
            spacing: 10
            MDRectangleFlatButton:
                text: 'Generate'
                size_hint: (1,1)
                on_press: root.manager.current = 'loading'
        MDRectangleFlatButton:
            text: 'Back'
            size_hint: (1,1)
            on_press: root.manager.current = 'menu'
        
<Pre_AGP0_Screen>:
    name: 'pre_agp0'
    MDBoxLayout:
        orientation: 'vertical'
        spacing: 10
        padding: 10
        MDTextField:
            id: initiative_name
            hint_text: "What is the initiative name? (any name)"
        MDBoxLayout:
            MDLabel:
                id: assessment_file_directory
                text: 'Input an assessment file.'
                halign: 'center'
                size_hint: (1,1)
            MDRectangleFlatButton:
                text: 'Choose a file'
                size_hint: (1,1)
                on_press: app.select_file_2()
        MDRectangleFlatButton:
            text: 'Generate'
            size_hint: (1,1)
            on_press: app.pre_agp0_generate()
        MDRectangleFlatButton:
            text: 'Back'
            size_hint: (1,1)
            on_press: root.manager.current = 'menu'
            
<AGP0_Screen>:
    name: 'agp0'
    MDLabel:
        text: 'Upload'
        halign: 'center'
    MDRectangleFlatButton:
        text: 'Back'
        pos_hint: {'center_x':0.5,'center_y':0.1}
        on_press: root.manager.current = 'menu'

<Loading_Screen>
    name: 'loading'
    on_enter: app.ea_generate()
    FitImage:
        source: '1.png'
    FloatLayout:
        MDIconButton:
            icon: "keyboard-return"
            theme_icon_color: "Custom"
            icon_color: app.theme_cls.primary_color
            pos: (10,10)
            on_press: root.manager.current = 'menu'
        MDLabel:
            text: "Generating..."
            halign: 'center'
            theme_text_color: "Custom"
            text_color: (1, 1, 1, 1)
            pos: (50,10)
            size_hint: (0.15,0.08)